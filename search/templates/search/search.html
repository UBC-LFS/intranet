{% extends "base.html" %}
{% load static wagtailcore_tags %}

{% block body_class %}body-search-page{% endblock %}
{% block main_class %}main-search-page{% endblock %}
{% block content_class %}content-search-page page{% endblock %}

{% block title %}Search{% endblock %}

{% block content %}

<h2 class="mb-3">Search</h2>

<form action="{% url 'search' %}" method="get">
  <div class="custom-form">
    <input class="form-control form-control-sm" name="query" type="search" placeholder="Search" {% if search_query %} value="{{ search_query }}"{% endif %} aria-label="Search" />
    <input class="btn btn-sm btn-primary mx-2" type="submit" value="Search" />
    <a class="btn btn-sm btn-outline-secondary" href="/search/">Clear</a>
  </div>
</form>

{% if search_results %}

  <p class="mt-1">
    You searched for <span class="text-danger fw-bold">{{ search_query }}</span>,
    {{ search_results|length }} result{{ search_results|length|pluralize }} found.
  </p>

  <ul class="mt-4">
    {% for result in search_results %}
      <li class="mb-2">
        <a class="fs-5" href="{% pageurl result %}">{{ result }}</a>
        <span class="badge text-bg-light">
          {% if result.specific.content_type.model == 'communicationpage' %}
            Communications
          {% elif result.specific.content_type.model == 'financepage' %}
            Finance
          {% elif result.specific.content_type.model == 'humanresourcepage' %}
            Human Resources
          {% elif result.specific.content_type.model == 'operationpage' %}
            Operations
          {% endif %}
        </span>
      </li>
    {% endfor %}
  </ul>

  {% if search_results.has_previous %}
    <a href="{% url 'search' %}?query={{ search_query|urlencode }}&amp;page={{ search_results.previous_page_number }}">Previous</a>
  {% endif %}

  {% if search_results.has_next %}
    <a href="{% url 'search' %}?query={{ search_query|urlencode }}&amp;page={{ search_results.next_page_number }}">Next</a>
  {% endif %}

{% elif search_query %}
  <p class="mt-3">No results found for <span class="text-danger fw-bold">{{ search_query }}</span></p>

{% else %}
  <p class="mt-3">You didn&apos;t search for anything!</p>
{% endif %}

{% endblock %}
